1
00:00:00,480 --> 00:00:08,130
Hello and welcome back in one of the previous lectures we have seen, what are the properties we need

2
00:00:08,130 --> 00:00:10,280
to configure for our circuit breaker?

3
00:00:10,860 --> 00:00:17,070
Now, in this lecture, we will set those properties to configure our circuit breaker using resilience

4
00:00:17,070 --> 00:00:17,580
energy.

5
00:00:18,450 --> 00:00:24,730
So just open the application properties of the student service and here we will set those properties.

6
00:00:25,080 --> 00:00:27,570
So let's start by adding those properties.

7
00:00:28,080 --> 00:00:29,310
So resilience for the.

8
00:00:32,250 --> 00:00:40,590
Not a circuit breaker and instances now we need to give the instanced name, you can give any let me

9
00:00:40,590 --> 00:00:42,830
give a meaningful say address service.

10
00:00:43,350 --> 00:00:46,930
Now, the first thing we need to set is sliding window size.

11
00:00:47,370 --> 00:00:49,920
How many last calls we want to consider?

12
00:00:50,130 --> 00:00:56,820
And based on that, we want to make that decision that suites would be either open closing or help open.

13
00:00:57,360 --> 00:00:58,690
So the sliding window size.

14
00:00:58,740 --> 00:01:01,840
For example, we want to consider last 10 calls.

15
00:01:02,400 --> 00:01:04,520
Now let's let other properties.

16
00:01:04,530 --> 00:01:05,580
So let me copy this.

17
00:01:05,580 --> 00:01:07,680
But this is the other instance.

18
00:01:07,700 --> 00:01:09,930
Name the next is threshold.

19
00:01:11,070 --> 00:01:16,790
So if the failure rate is greater than or equal to the threshold, then make the switch as open.

20
00:01:17,220 --> 00:01:18,030
So here.

21
00:01:19,120 --> 00:01:23,660
Filaret also, for example, 50 percent, this is in the percentage.

22
00:01:23,680 --> 00:01:29,650
OK, so if failure rate is greater than or equal to 50 percent, make the switch as open.

23
00:01:30,250 --> 00:01:36,730
Now, the next is once the switch is open, how many seconds we want to wait in the open state.

24
00:01:36,940 --> 00:01:37,270
Right.

25
00:01:37,720 --> 00:01:40,360
So wait duration in open state.

26
00:01:41,050 --> 00:01:43,350
So here we need to go in milliseconds.

27
00:01:43,540 --> 00:01:50,260
For example, we want to wait for 30 seconds in the open state, so we need to give thirty thousand

28
00:01:50,290 --> 00:01:51,310
milliseconds.

29
00:01:51,850 --> 00:01:55,600
So this time we are making that the switch should be open.

30
00:01:55,810 --> 00:01:59,770
So our address service will get this time to recover from that issue.

31
00:01:59,770 --> 00:02:07,810
Whatever it is having now after this duration expires, right after the 30 seconds we want to make,

32
00:02:07,810 --> 00:02:10,340
the switch has happened automatically, right.

33
00:02:10,780 --> 00:02:16,090
So automatic transmission from open to half open, equal to two.

34
00:02:17,660 --> 00:02:23,620
So after the 30 seconds in the open state, it will automatically make the swing state as half open

35
00:02:24,350 --> 00:02:28,800
now in the half open state, we can allow some calls to go right.

36
00:02:29,060 --> 00:02:31,720
So that is permitted number of calls.

37
00:02:32,360 --> 00:02:36,220
So, for example, we want to allow five calls in the hopper open state.

38
00:02:37,010 --> 00:02:41,630
So these are the properties we need to set for the resilience for the circuit breaker.

39
00:02:42,200 --> 00:02:48,470
Now, to take the current state of the switch, we can use actuator and we have already added the dependancy

40
00:02:48,470 --> 00:02:53,810
in the bombed out XML for actuator so far that we need to configure a few properties.

41
00:02:54,110 --> 00:02:55,730
So let's see that part as well.

42
00:02:57,220 --> 00:02:57,970
So here.

43
00:02:59,770 --> 00:03:06,640
Allow health indicators to feel equal to true and another property we need to set is.

44
00:03:09,160 --> 00:03:11,710
Register health indicator equal to two.

45
00:03:12,780 --> 00:03:18,220
So these are the two properties for actuator to configure along with the resilience for them.

46
00:03:18,510 --> 00:03:22,760
Now there are a couple of properties we need to set for actuator itself.

47
00:03:23,670 --> 00:03:30,930
Like, we need to enable the less health endpoint so that we need to start using the management not.

48
00:03:33,040 --> 00:03:37,480
Held dart circuit breaker enabled a call to Drew.

49
00:03:38,480 --> 00:03:41,350
And the next is management dot.

50
00:03:42,260 --> 00:03:43,910
And point start.

51
00:03:47,120 --> 00:03:49,640
Web expos include a call to.

52
00:03:52,470 --> 00:03:55,200
The next is management.

53
00:03:58,480 --> 00:04:07,060
Thought and point, here is the typo, let me correct it out, so management, so Opteron point held.

54
00:04:08,070 --> 00:04:15,720
Lots of details equal to always, so these are the three properties we need to set for the actuator

55
00:04:16,050 --> 00:04:21,990
and these two properties to work with the resilience for the circuit breaker along with the actuator

56
00:04:22,650 --> 00:04:28,380
and these properties we have set for circuit breaker now to check the current state of the switch.

57
00:04:28,410 --> 00:04:31,850
There are a couple of things we need to look for in the actuator.

58
00:04:32,190 --> 00:04:34,740
So here we have three states, whatever suite.

59
00:04:34,740 --> 00:04:35,020
Right?

60
00:04:35,340 --> 00:04:39,360
So the first is closer to the second is open.

61
00:04:40,490 --> 00:04:42,650
And the authorities have opened.

62
00:04:44,410 --> 00:04:51,160
Now, Actuator will not use these terms, too, so the Swedes did so for closure, it will soirÃ©es up

63
00:04:51,850 --> 00:04:56,890
for open, it will say is down and for half open it will say is unknown.

64
00:04:58,000 --> 00:05:03,370
So whenever we are using the actuator to take the current state of the switch, it will not use these

65
00:05:03,380 --> 00:05:07,800
terms like close, low, open or how open it will use up for the state.

66
00:05:07,810 --> 00:05:11,320
It will use down for the open state and for half open.

67
00:05:11,590 --> 00:05:13,480
It will use as unknown.

68
00:05:13,870 --> 00:05:20,230
So make sure you remember these three things while taking the current state of the suite using actuator

69
00:05:20,890 --> 00:05:23,230
now using this instance name.

70
00:05:23,560 --> 00:05:25,000
Let's go to school and service.

71
00:05:25,000 --> 00:05:29,460
And here inside this matter, we are making the call to address service.

72
00:05:29,470 --> 00:05:29,770
Right.

73
00:05:30,280 --> 00:05:34,060
So here we will mark this as a circuit breaker.

74
00:05:36,310 --> 00:05:43,120
And in the name, we need to provide the instance name, so in our example, we have a dress service.

75
00:05:43,150 --> 00:05:49,570
This is the instance name, whatever you provided or hear the same, you need to provide using this

76
00:05:49,570 --> 00:05:50,560
as a circuit breaker.

77
00:05:50,560 --> 00:05:57,400
In addition, and here using the front line, we are making the call to address service about this matter.

78
00:05:57,410 --> 00:06:01,720
We need to use the circuit breaker annotation and provide the instance name.

79
00:06:03,090 --> 00:06:08,580
So what we need here is let's recap the things we said, the resilience for the properties, for the

80
00:06:08,580 --> 00:06:13,670
circuit breaker, we said the properties for actuator to display the current state of the sweet.

81
00:06:13,980 --> 00:06:18,470
And these are the states it will store in the actuator, up, down in unknown.

82
00:06:18,810 --> 00:06:23,920
Now, using this instance name, we market over matter with the circuit breaker and.

83
00:06:24,690 --> 00:06:27,240
So that's all we did in this lecture.

84
00:06:28,500 --> 00:06:32,230
Now, the further configuration we will see in the next lecture.

85
00:06:32,760 --> 00:06:34,530
So that's all for now.

86
00:06:34,800 --> 00:06:36,330
We'll see you in the next lecture.

87
00:06:36,900 --> 00:06:37,830
Thank you very much.
